<ion-view>
  <ion-header-bar class="bar-positive">
    <div class="buttons">
      <button menu-toggle="left" class="button button-icon ion-navicon"></button>
      <h1 class="title">Liste de courses</h1>
    </div>
  </ion-header-bar>
  <ion-content class="shoppinglist">
    <div class="padding">
      <div class="button-bar bar-light">
        <a class="button" ng-class="{active: mealView}" ng-click="showMealView()">Repas</a>
        <a class="button" ng-class="{active: !mealView}" ng-click="showIngredientView()">Ingrédients</a>
      </div>
    </div>
    <div class="list" ng-show="mealView">
      <div ng-if="!list || !list.meals || list.meals.length === 0" class="padding">
        Aucun repas ajouté pour le moment.
      </div>
      <div class="item item-thumbnail-left" ng-repeat="meal in list.meals">
        <img ng-src="images/courses/1-1/{{meal.data.image}}">
        <h2>{{meal.data.name}}</h2>
        <p>4 personnes - {{mealIngredients(meal.data)}} ingrédients</p>
        <p>
          <icon-progress icon="fa-spoon" color="green" progress="meal.data.difficulty*10"></icon-progress>
          <icon-progress icon="fa-thumbs-up" color="green" progress="meal.data.rating*10"></icon-progress>
        </p>
      </div>
    </div>
    <div class="list" ng-hide="mealView">
      <div ng-if="!itemsByCategory || itemsByCategory.length === 0" class="padding">
        Aucun ingrédient à acheter !!!
      </div>
      <div ng-repeat="category in itemsByCategory">
        <div class="item item-divider">{{category.name}}</div>
        <div class="item item-checkbox" ng-repeat="item in category.items">
          <label class="checkbox">
            <input type="checkbox" ng-change="buyItem(item)" ng-model="item.bought">
          </label>
          {{item.quantity | quantity}}
          {{item.pre}}{{item.food.name}}{{item.post}}
        </div>
      </div>
    </div>
  </ion-content>
</ion-view>